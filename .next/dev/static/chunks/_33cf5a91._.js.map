{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/cpast/Documents/Repositories/Melira/app/auth/spotify/login/page.tsx"],"sourcesContent":["'use client';\n\nimport { getSpotifySettings } from '@/lib/api/spotify';\nimport { useRouter } from 'next/navigation';\nimport { useEffect } from 'react';\n\nexport default function SpotifyLogin() {\n\tconst router = useRouter();\n\n\tuseEffect(() => {\n\t\tasync function initLogin() {\n\t\t\ttry {\n\t\t\t\tconst settings = await getSpotifySettings();\n\t\t\t\tconst codeVerifier = generateCodeVerifier();\n\t\t\t\tconst codeChallenge = await generateCodeChallenge(codeVerifier);\n\n\t\t\t\t// Store codeVerifier in sessionStorage\n\t\t\t\tsessionStorage.setItem('spotify_code_verifier', codeVerifier);\n\n\t\t\t\tconst params = new URLSearchParams({\n\t\t\t\t\tclient_id: settings.clientId,\n\t\t\t\t\tresponse_type: 'code',\n\t\t\t\t\t// TEMPORAL: http://localhost:3000 exactamente (sin path)\n\t\t\t\t\tredirect_uri: 'http://localhost:3000',\n\t\t\t\t\tscope: 'user-read-private user-read-email playlist-read-private playlist-read-collaborative playlist-modify-public playlist-modify-private',\n\t\t\t\t\tcode_challenge: codeChallenge,\n\t\t\t\t\tcode_challenge_method: 'S256',\n\t\t\t\t});\n\n\t\t\t\tconst authUrl = `https://accounts.spotify.com/authorize?${params.toString()}`;\n\t\t\t\twindow.location.href = authUrl;\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error initiating login:', error);\n\t\t\t\talert('Error loading settings. Please configure Spotify settings first.');\n\t\t\t\trouter.push('/settings');\n\t\t\t}\n\t\t}\n\n\t\tinitLogin();\n\t}, [router]);\n\n\treturn <div>Redirecting to Spotify...</div>;\n}\n\nfunction generateCodeVerifier() {\n\tconst array = new Uint8Array(32);\n\tcrypto.getRandomValues(array);\n\treturn btoa(String.fromCharCode(...array)).replace(/[^a-zA-Z0-9]/g, '');\n}\n\nasync function generateCodeChallenge(verifier: string) {\n\tconst encoder = new TextEncoder();\n\tconst data = encoder.encode(verifier);\n\tconst hash = await crypto.subtle.digest('SHA-256', data);\n\treturn btoa(String.fromCharCode(...new Uint8Array(hash))).replace(/[^a-zA-Z0-9]/g, '');\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACvB,MAAM,SAAS,IAAA,kJAAS;IAExB,IAAA,0KAAS;kCAAC;YACT,eAAe;gBACd,IAAI;oBACH,MAAM,WAAW,MAAM,IAAA,8IAAkB;oBACzC,MAAM,eAAe;oBACrB,MAAM,gBAAgB,MAAM,sBAAsB;oBAElD,uCAAuC;oBACvC,eAAe,OAAO,CAAC,yBAAyB;oBAEhD,MAAM,SAAS,IAAI,gBAAgB;wBAClC,WAAW,SAAS,QAAQ;wBAC5B,eAAe;wBACf,yDAAyD;wBACzD,cAAc;wBACd,OAAO;wBACP,gBAAgB;wBAChB,uBAAuB;oBACxB;oBAEA,MAAM,UAAU,CAAC,uCAAuC,EAAE,OAAO,QAAQ,IAAI;oBAC7E,OAAO,QAAQ,CAAC,IAAI,GAAG;gBACxB,EAAE,OAAO,OAAO;oBACf,QAAQ,KAAK,CAAC,2BAA2B;oBACzC,MAAM;oBACN,OAAO,IAAI,CAAC;gBACb;YACD;YAEA;QACD;iCAAG;QAAC;KAAO;IAEX,qBAAO,6LAAC;kBAAI;;;;;;AACb;GApCwB;;QACR,kJAAS;;;KADD;AAsCxB,SAAS;IACR,MAAM,QAAQ,IAAI,WAAW;IAC7B,OAAO,eAAe,CAAC;IACvB,OAAO,KAAK,OAAO,YAAY,IAAI,QAAQ,OAAO,CAAC,iBAAiB;AACrE;AAEA,eAAe,sBAAsB,QAAgB;IACpD,MAAM,UAAU,IAAI;IACpB,MAAM,OAAO,QAAQ,MAAM,CAAC;IAC5B,MAAM,OAAO,MAAM,OAAO,MAAM,CAAC,MAAM,CAAC,WAAW;IACnD,OAAO,KAAK,OAAO,YAAY,IAAI,IAAI,WAAW,QAAQ,OAAO,CAAC,iBAAiB;AACpF"}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/cpast/Documents/Repositories/Melira/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}}]
}