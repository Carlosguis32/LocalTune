{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/cpast/Documents/Repositories/Melira/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { exchangeToken } from '@/lib/api/spotify';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { Suspense, useEffect, useState } from 'react';\n\nfunction HomeContent() {\n\tconst router = useRouter();\n\tconst searchParams = useSearchParams();\n\tconst [isProcessingAuth, setIsProcessingAuth] = useState(false);\n\n\tuseEffect(() => {\n\t\tasync function handleSpotifyCallback() {\n\t\t\t// Check if this is a Spotify callback (has 'code' parameter)\n\t\t\tconst code = searchParams.get('code');\n\t\t\tconst error = searchParams.get('error');\n\n\t\t\tif (error) {\n\t\t\t\tconsole.error('Spotify auth error:', error);\n\t\t\t\talert('Authentication failed: ' + error);\n\t\t\t\trouter.push('/settings');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (code) {\n\t\t\t\tsetIsProcessingAuth(true);\n\t\t\t\tconst codeVerifier = sessionStorage.getItem('spotify_code_verifier');\n\t\t\t\t\n\t\t\t\tif (!codeVerifier) {\n\t\t\t\t\talert('Code verifier not found. Please try again.');\n\t\t\t\t\trouter.push('/settings');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tawait exchangeToken(code, codeVerifier);\n\t\t\t\t\tsessionStorage.removeItem('spotify_code_verifier');\n\t\t\t\t\talert('Successfully authenticated with Spotify!');\n\t\t\t\t\t// Clean URL and redirect\n\t\t\t\t\twindow.history.replaceState({}, '', '/');\n\t\t\t\t\trouter.push('/playlist');\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('Error exchanging token:', error);\n\t\t\t\t\talert('Failed to authenticate. Please try again.');\n\t\t\t\t\trouter.push('/settings');\n\t\t\t\t} finally {\n\t\t\t\t\tsetIsProcessingAuth(false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\thandleSpotifyCallback();\n\t}, [router, searchParams]);\n\n\tif (isProcessingAuth) {\n\t\treturn (\n\t\t\t<main className=\"flex items-center justify-center min-h-screen\">\n\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\t<h1 className=\"text-2xl font-bold mb-2\">Processing authentication...</h1>\n\t\t\t\t\t<p className=\"text-muted-foreground\">Please wait while we connect to Spotify</p>\n\t\t\t\t</div>\n\t\t\t</main>\n\t\t);\n\t}\n\n\treturn (\n\t\t<main className=\"flex items-center justify-center min-h-screen\">\n\t\t\t<div className=\"text-center\">\n\t\t\t\t<h1 className=\"text-4xl font-bold mb-4\">Welcome to Melira</h1>\n\t\t\t\t<p className=\"text-muted-foreground\">Your personal music library</p>\n\t\t\t</div>\n\t\t</main>\n\t);\n}\n\nexport default function Home() {\n\treturn (\n\t\t<Suspense fallback={<div className=\"flex items-center justify-center min-h-screen\">Loading...</div>}>\n\t\t\t<HomeContent />\n\t\t</Suspense>\n\t);\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMA,SAAS;;IACR,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,eAAe,IAAA,wJAAe;IACpC,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAC;IAEzD,IAAA,0KAAS;iCAAC;YACT,eAAe;gBACd,6DAA6D;gBAC7D,MAAM,OAAO,aAAa,GAAG,CAAC;gBAC9B,MAAM,QAAQ,aAAa,GAAG,CAAC;gBAE/B,IAAI,OAAO;oBACV,QAAQ,KAAK,CAAC,uBAAuB;oBACrC,MAAM,4BAA4B;oBAClC,OAAO,IAAI,CAAC;oBACZ;gBACD;gBAEA,IAAI,MAAM;oBACT,oBAAoB;oBACpB,MAAM,eAAe,eAAe,OAAO,CAAC;oBAE5C,IAAI,CAAC,cAAc;wBAClB,MAAM;wBACN,OAAO,IAAI,CAAC;wBACZ;oBACD;oBAEA,IAAI;wBACH,MAAM,IAAA,yIAAa,EAAC,MAAM;wBAC1B,eAAe,UAAU,CAAC;wBAC1B,MAAM;wBACN,yBAAyB;wBACzB,OAAO,OAAO,CAAC,YAAY,CAAC,CAAC,GAAG,IAAI;wBACpC,OAAO,IAAI,CAAC;oBACb,EAAE,OAAO,OAAO;wBACf,QAAQ,KAAK,CAAC,2BAA2B;wBACzC,MAAM;wBACN,OAAO,IAAI,CAAC;oBACb,SAAU;wBACT,oBAAoB;oBACrB;gBACD;YACD;YAEA;QACD;gCAAG;QAAC;QAAQ;KAAa;IAEzB,IAAI,kBAAkB;QACrB,qBACC,6LAAC;YAAK,WAAU;sBACf,cAAA,6LAAC;gBAAI,WAAU;;kCACd,6LAAC;wBAAG,WAAU;kCAA0B;;;;;;kCACxC,6LAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;;;;;;IAIzC;IAEA,qBACC,6LAAC;QAAK,WAAU;kBACf,cAAA,6LAAC;YAAI,WAAU;;8BACd,6LAAC;oBAAG,WAAU;8BAA0B;;;;;;8BACxC,6LAAC;oBAAE,WAAU;8BAAwB;;;;;;;;;;;;;;;;;AAIzC;GAnES;;QACO,kJAAS;QACH,wJAAe;;;KAF5B;AAqEM,SAAS;IACvB,qBACC,6LAAC,yKAAQ;QAAC,wBAAU,6LAAC;YAAI,WAAU;sBAAgD;;;;;;kBAClF,cAAA,6LAAC;;;;;;;;;;AAGJ;MANwB"}},
    {"offset": {"line": 170, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/cpast/Documents/Repositories/Melira/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}}]
}