{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../app/auth/spotify/callback/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","'use client';\n\nimport { exchangeToken } from '@/lib/api/spotify';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { Suspense, useEffect } from 'react';\n\nfunction SpotifyCallbackContent() {\n\tconst router = useRouter();\n\tconst searchParams = useSearchParams();\n\n\tuseEffect(() => {\n\t\tasync function handleCallback() {\n\t\t\tconst code = searchParams.get('code');\n\t\t\tconst error = searchParams.get('error');\n\n\t\t\tif (error) {\n\t\t\t\tconsole.error('Auth error:', error);\n\t\t\t\talert('Authentication failed: ' + error);\n\t\t\t\trouter.push('/settings');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!code) {\n\t\t\t\talert('No authorization code received');\n\t\t\t\trouter.push('/settings');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst codeVerifier = sessionStorage.getItem('spotify_code_verifier');\n\t\t\tif (!codeVerifier) {\n\t\t\t\talert('Code verifier not found. Please try again.');\n\t\t\t\trouter.push('/settings');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tawait exchangeToken(code, codeVerifier);\n\t\t\t\tsessionStorage.removeItem('spotify_code_verifier');\n\t\t\t\talert('Successfully authenticated with Spotify!');\n\t\t\t\trouter.push('/');\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error exchanging token:', error);\n\t\t\t\talert('Failed to authenticate. Please try again.');\n\t\t\t\trouter.push('/settings');\n\t\t\t}\n\t\t}\n\n\t\thandleCallback();\n\t}, [router, searchParams]);\n\n\treturn <div>Processing authentication...</div>;\n}\n\nexport default function SpotifyCallback() {\n\treturn (\n\t\t<Suspense fallback={<div>Loading...</div>}>\n\t\t\t<SpotifyCallbackContent />\n\t\t</Suspense>\n\t);\n}"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml"],"mappings":"yYAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACC,kBAAkB,+BCFzCJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACE,kBAAkB,0CCAzC,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEA,SAAS,IACR,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAe,CAAA,EAAA,EAAA,eAAA,AAAe,IA0CpC,MAxCA,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,MACT,AAoCA,eApCe,EACd,IAAM,EAAO,EAAa,GAAG,CAAC,QACxB,EAAQ,EAAa,GAAG,CAAC,SAE/B,GAAI,EAAO,CACV,QAAQ,KAAK,CAAC,cAAe,GAC7B,MAAM,0BAA4B,GAClC,EAAO,IAAI,CAAC,aACZ,MACD,CAEA,GAAI,CAAC,EAAM,CACV,MAAM,kCACN,EAAO,IAAI,CAAC,aACZ,MACD,CAEA,IAAM,EAAe,eAAe,OAAO,CAAC,yBAC5C,GAAI,CAAC,EAAc,CAClB,MAAM,8CACN,EAAO,IAAI,CAAC,aACZ,MACD,CAEA,GAAI,CACH,MAAM,CAAA,EAAA,EAAA,aAAA,AAAa,EAAC,EAAM,GAC1B,eAAe,UAAU,CAAC,yBAC1B,MAAM,4CACN,EAAO,IAAI,CAAC,IACb,CAAE,MAAO,EAAO,CACf,QAAQ,KAAK,CAAC,0BAA2B,GACzC,MAAM,6CACN,EAAO,IAAI,CAAC,YACb,CACD,GAGD,EAAG,CAAC,EAAQ,EAAa,EAElB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAI,gCACb,CAEe,SAAS,IACvB,MACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,SAAU,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAI,wBACxB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA,IAGJ","ignoreList":[0,1]}