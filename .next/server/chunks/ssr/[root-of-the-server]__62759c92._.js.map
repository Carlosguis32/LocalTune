{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../app/auth/spotify/login/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","'use client';\n\nimport { getSpotifySettings } from '@/lib/api/spotify';\nimport { useRouter } from 'next/navigation';\nimport { useEffect } from 'react';\n\nexport default function SpotifyLogin() {\n\tconst router = useRouter();\n\n\tuseEffect(() => {\n\t\tasync function initLogin() {\n\t\t\ttry {\n\t\t\t\tconst settings = await getSpotifySettings();\n\t\t\t\tconst codeVerifier = generateCodeVerifier();\n\t\t\t\tconst codeChallenge = await generateCodeChallenge(codeVerifier);\n\n\t\t\t\t// Store codeVerifier in sessionStorage\n\t\t\t\tsessionStorage.setItem('spotify_code_verifier', codeVerifier);\n\n\t\t\t\tconst params = new URLSearchParams({\n\t\t\t\t\tclient_id: settings.clientId,\n\t\t\t\t\tresponse_type: 'code',\n\t\t\t\t\tredirect_uri: 'http://127.0.0.1:3000/auth/spotify/callback',\n\t\t\t\t\tscope: 'user-read-private user-read-email',\n\t\t\t\t\tcode_challenge: codeChallenge,\n\t\t\t\t\tcode_challenge_method: 'S256',\n\t\t\t\t});\n\n\t\t\t\tconst authUrl = `https://accounts.spotify.com/authorize?${params.toString()}`;\n\t\t\t\twindow.location.href = authUrl;\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error initiating login:', error);\n\t\t\t\talert('Error loading settings. Please configure Spotify settings first.');\n\t\t\t\trouter.push('/settings');\n\t\t\t}\n\t\t}\n\n\t\tinitLogin();\n\t}, [router]);\n\n\treturn <div>Redirecting to Spotify...</div>;\n}\n\nfunction generateCodeVerifier() {\n\tconst array = new Uint8Array(32);\n\tcrypto.getRandomValues(array);\n\treturn btoa(String.fromCharCode(...array)).replace(/[^a-zA-Z0-9]/g, '');\n}\n\nasync function generateCodeChallenge(verifier: string) {\n\tconst encoder = new TextEncoder();\n\tconst data = encoder.encode(verifier);\n\tconst hash = await crypto.subtle.digest('SHA-256', data);\n\treturn btoa(String.fromCharCode(...new Uint8Array(hash))).replace(/[^a-zA-Z0-9]/g, '');\n}\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml"],"mappings":"yYAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACC,kBAAkB,+BCFzCJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACE,kBAAkB,0CCAzC,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACvB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAiCxB,MA/BA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,MACT,AA2BA,eA3Be,EACd,GAAI,CACH,IAgCG,EAhCG,EAAW,MAAM,CAAA,EAAA,EAAA,kBAAA,AAAkB,IACnC,KA+BK,IAAI,MA/BM,KA+BK,IAC7B,OAAO,eAAe,CAAC,GAChB,KAAK,OAAO,YAAY,IAAI,IAAQ,OAAO,CAAC,gBAAiB,KAhC3D,EAAgB,MAAM,EAAsB,GAGlD,eAAe,OAAO,CAAC,wBAAyB,GAEhD,IAAM,EAAS,IAAI,gBAAgB,CAClC,UAAW,EAAS,QAAQ,CAC5B,cAAe,OACf,aAAc,8CACd,MAAO,oCACP,eAAgB,EAChB,sBAAuB,MACxB,GAEM,EAAU,CAAC,uCAAuC,EAAE,EAAO,QAAQ,GAAA,CAAI,CAC7E,OAAO,QAAQ,CAAC,IAAI,CAAG,CACxB,CAAE,MAAO,EAAO,CACf,QAAQ,KAAK,CAAC,0BAA2B,GACzC,MAAM,oEACN,EAAO,IAAI,CAAC,YACb,CACD,GAGD,EAAG,CAAC,EAAO,EAEJ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAI,6BACb,CAQA,eAAe,EAAsB,CAAgB,EAEpD,IAAM,EADU,AACH,IADO,cACC,MAAM,CAAC,GAE5B,OAAO,KAAK,OAAO,YAAY,IAAI,IAAI,WAD1B,AACqC,MAD/B,OAAO,MAAM,CAAC,MAAM,CAAC,UAAW,MACO,OAAO,CAAC,gBAAiB,GACpF","ignoreList":[0,1]}